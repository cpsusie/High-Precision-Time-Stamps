# High Precision Timestamps

## A timestamp utility used by my other projects superior for my use-cases to use of DateTime.Now.

This project provides high precision timestamps (calibrated on a per-thread basis and periodically synchronized with system clock) that is very useful for obtaining DateTimes which when subtracted from other DateTimes obtained on the same thread within the same period provides a useful delta.  The source is the stopwatch, which uses a high performance event counter, if available.  Also, rather than just using the tick count, it allows the timestamp to serve as a readable and relatable timestamp in event logs.  It should not be used for timestamps that users rely-on to have a high degree of accuracy vis-a-vis local time, but, in most cases, can be quite accurate.  When considering two such DateTimes obtained within a (short) calibration period of each other on the same thread, the elapsed difference between themselves should be as accurate as the machine's high precision event timer.

Another utility herein is the monotonic timestamp.  This also uses Stopwatch ticks but is calibrated once at startup for all threads.  A monotonic clock never goes backwards, unlike a system clock (subject to user adjustment, daylight savings time, synchronization with a time server, leap seconds etc).  These stamps store an offset in stopwatch ticks from the reference time (readonly static value computed first time stamp provider is activated).  Thus, these stamps can be understood to be monotonic ticks elapsed since a reference time.  They can also be converted into date time for storage as timestamps but, since calibrated once only, drift between the monotonic clock and system clock (in addition to changes to system clock) may make their timestamps misleading over time.  These values cannot be serialized as-is (because they rely on static readonly in-process state to derive their semantic meaning).  They can be converted to DateTimes but be wary of the issues I have described.  At a future time I may provide an "archive" format for these to allow them to be saved or serialized.  Understood as monotonic ticks since a reference datetime, these are superior to the high precision stamps.  Also, the value contains only a long (the calibration data, again, is static) so recording the stamp and comparisons / arithmetic is quick.  String conversions, extracting date times may be slower but it is more important to record and compare quickly than to log, print, output quickly for my use cases.

This project is currently used by me in other projects where it has proved useful for the particular ways it is employed in those projects.  Extensive pan-use case testing has not been performed.  There is a basic console test application on the source page for this project on GitHub.  Eventually I may test this more extensively and document it more rigorously but that is not high on my priority list right now: it works well for what I use it for.  If you would like to help get this into "general use library shape", contact me.  